if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(q){function ea(d){var i=d.indexOf(":");return i<0?d:{space:q.ns[d.substring(0,i)],local:d.substring(i+1)}}function R(){for(var d=0;d<R.maps.length;d++)R.maps[d].resize()}function V(d){return 360/Math.PI*Math.atan(Math.exp(d*Math.PI/180))-90}function W(d){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360))}function Z(d,i){if(d.row>i.row){var c=d;d=i;i=c}return{x0:d.column,y0:d.row,x1:i.column,y1:i.row,dx:i.column-d.column,dy:i.row-d.row}}function ba(d,i,c,j,e){c=Math.max(c,Math.floor(i.y0));
j=Math.min(j,Math.ceil(i.y1));if(d.x0==i.x0&&d.y0==i.y0?d.x0+i.dy/d.dy*d.dx<i.x1:d.x1-i.dy/d.dy*d.dx<i.x0){var a=d;d=i;i=a}a=d.dx/d.dy;var g=i.dx/i.dy,m=d.dx>0,u=i.dx<0;for(c=c;c<j;c++){var r=a*Math.max(0,Math.min(d.dy,c+m-d.y0))+d.x0;e(Math.floor(g*Math.max(0,Math.min(i.dy,c+u-i.y0))+i.x0),Math.ceil(r),c)}}function ca(d,i,c,j,e,a){var g=Z(d,i);i=Z(i,c);d=Z(c,d);if(g.dy>i.dy){c=g;g=i;i=c}if(g.dy>d.dy){c=g;g=d;d=c}if(i.dy>d.dy){c=i;i=d;d=c}g.dy&&ba(d,g,j,e,a);i.dy&&ba(d,i,j,e,a)}q.version="2.5.1";
var Y={x:0,y:0};q.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};q.id=function(){var d=0;return function(){return++d}}();q.svg=function(d){return document.createElementNS(q.ns.svg,d)};q.transform=function(d,i,c,j,e,a){var g={},m,u,r;if(!arguments.length){d=1;i=e=c=0;j=1;a=0}g.zoomFraction=function(k){if(!arguments.length)return u;u=k;m=Math.floor(u+Math.log(Math.sqrt(d*d+i*i+c*c+j*j))/Math.LN2);r=Math.pow(2,-m);return g};g.apply=function(k){var h=Math.pow(2,-k.zoom),o=
Math.pow(2,k.zoom-m);return{column:(d*k.column*h+c*k.row*h+e)*o,row:(i*k.column*h+j*k.row*h+a)*o,zoom:k.zoom-m}};g.unapply=function(k){var h=Math.pow(2,-k.zoom),o=Math.pow(2,k.zoom+m);return{column:(k.column*h*j-k.row*h*c-e*j+a*c)/(d*j-i*c)*o,row:(k.column*h*i-k.row*h*d-e*i+a*d)/(c*i-j*d)*o,zoom:k.zoom+m}};g.toString=function(){return"matrix("+[d*r,i*r,c*r,j*r].join(" ")+" 0 0)"};return g.zoomFraction(0)};q.cache=function(d,i){function c(h){k--;i&&i(h);delete g[h.key];if(h.next)h.next.prev=h.prev;
else if(u=h.prev)u.next=null;if(h.prev)h.prev.next=h.next;else if(m=h.next)m.prev=null}function j(){for(var h=u;k>r;h=h.prev){if(!h)break;h.lock||c(h)}}var e={},a={},g={},m=null,u=null,r=64,k=0;e.peek=function(h){return g[[h.zoom,h.column,h.row].join("/")]};e.load=function(h,o){var v=[h.zoom,h.column,h.row].join("/"),y=g[v];if(y){if(y.prev){if(y.prev.next=y.next)y.next.prev=y.prev;else u=y.prev;y.prev=null;y.next=m;m=m.prev=y}y.lock=1;return a[v]=y}y={key:v,column:h.column,row:h.row,zoom:h.zoom,next:m,
prev:null,lock:1};d.call(null,y,o);a[v]=g[v]=y;if(m)m.prev=y;else u=y;m=y;k++;return y};e.unload=function(h){if(!(h in a))return false;var o=a[h];o.lock=0;delete a[h];o.request&&o.request.abort(false)&&c(o);return o};e.locks=function(){return a};e.size=function(h){if(!arguments.length)return r;r=h;j();return e};e.flush=function(){j();return e};e.clear=function(){for(var h in g){var o=g[h];o.request&&o.request.abort(false);i&&i(g[h]);if(o.lock){o.lock=0;o.element.parentNode.removeChild(o.element)}}a=
{};g={};m=u=null;k=0;return e};return e};q.url=function(d){function i(e){var a=e.zoom<0?1:1<<e.zoom,g=e.column;if(j){g=e.column%a;if(g<0)g+=a}else if(g<0||g>=a)return null;return d.replace(/{(.)}/g,function(m,u){switch(u){case "S":return c[(Math.abs(e.zoom)+e.row+g)%c.length];case "Z":return e.zoom;case "X":return g;case "Y":return e.row;case "B":var r=q.map.coordinateLocation({row:e.row,column:g,zoom:e.zoom}),k=q.map.coordinateLocation({row:e.row+1,column:g+1,zoom:e.zoom}),h=Math.ceil(Math.log(e.zoom)/
Math.LN2);return k.lat.toFixed(h)+","+r.lon.toFixed(h)+","+r.lat.toFixed(h)+","+k.lon.toFixed(h)}return u})}var c=[],j=true;i.template=function(e){if(!arguments.length)return d;d=e;return i};i.hosts=function(e){if(!arguments.length)return c;c=e;return i};i.repeat=function(e){if(!arguments.length)return j;j=e;return i};return i};q.dispatch=function(d){var i={};d.on=function(c,j){for(var e=i[c]||(i[c]=[]),a=0;a<e.length;a++)if(e[a].handler==j)return d;e.push({handler:j,on:true});return d};d.off=function(c,
j){var e=i[c];if(e)for(var a=0;a<e.length;a++){var g=e[a];if(g.handler==j){g.on=false;e.splice(a,1);break}}return d};return function(c){var j=i[c.type];if(j){j=j.slice();for(var e=0;e<j.length;e++){var a=j[e];a.on&&a.handler.call(d,c)}}}};q.queue=function(){function d(){if(!(e>=a||!j.length)){e++;j.pop()()}}function i(g){for(var m=0;m<j.length;m++)if(j[m]==g){j.splice(m,1);return true}return false}function c(g,m,u){function r(){k=new XMLHttpRequest;u&&k.overrideMimeType&&k.overrideMimeType(u);k.open("GET",
g,true);k.onreadystatechange=function(){if(k.readyState==4){e--;k.status<300&&m(k);d()}};k.send(null)}var k;j.push(r);d();return{abort:function(h){if(i(r))return true;if(h&&k){k.abort();return true}return false}}}var j=[],e=0,a=6;return{text:function(g,m,u){return c(g,function(r){r.responseText&&m(r.responseText)},u)},xml:function(g,m){return c(g,function(u){u.responseXML&&m(u.responseXML)},"application/xml")},json:function(g,m){return c(g,function(u){u.responseText&&m(JSON.parse(u.responseText))},
"application/json")},image:function(g,m,u){function r(){k=document.createElement("img");k.onerror=function(){e--;d()};k.onload=function(){e--;u(k);d()};k.src=m;g.setAttributeNS(q.ns.xlink,"href",m)}var k;j.push(r);d();return{abort:function(h){if(i(r))return true;if(h&&k){k.src="about:";return true}return false}}}}}();q.map=function(){function d(){if(o)if(r<o[0])r=o[0];else if(r>o[1])r=o[1];k=r-(r=Math.round(r));h=Math.pow(2,k)}function i(){if(n){var f=45/Math.pow(2,r+k-3),t=Math.max(Math.abs(C*g.x+
y*g.y),Math.abs(B*g.x+E*g.y)),s=V(K-t*f/m.y);t=V(l+t*f/m.y);u.lat=Math.max(s,Math.min(t,u.lat));s=Math.max(Math.abs(C*g.y+y*g.x),Math.abs(B*g.y+E*g.x));u.lon=Math.max(n[0].lon-s*f/m.x,Math.min(n[1].lon+s*f/m.x,u.lon))}}var c={},j,e,a=Y,g=Y,m={x:256,y:256},u={lat:37.76487,lon:-122.41948},r=12,k=0,h=1,o=[1,18],v=0,y=1,C=0,E=1,B=0,K=-180,l=180,n=[{lat:V(K),lon:-Infinity},{lat:V(l),lon:Infinity}];c.locationCoordinate=function(f){f=q.map.locationCoordinate(f);var t=Math.pow(2,r);f.column*=t;f.row*=t;f.zoom+=
r;return f};c.coordinateLocation=q.map.coordinateLocation;c.coordinatePoint=function(f,t){var s=Math.pow(2,r-t.zoom),A=Math.pow(2,r-f.zoom),w=(t.column*s-f.column*A)*m.x*h;s=(t.row*s-f.row*A)*m.y*h;return{x:g.x+y*w-C*s,y:g.y+C*w+y*s}};c.pointCoordinate=function(f,t){var s=Math.pow(2,r-f.zoom),A=(t.x-g.x)/h,w=(t.y-g.y)/h;return{column:f.column*s+(E*A-B*w)/m.x,row:f.row*s+(B*A+E*w)/m.y,zoom:r}};c.locationPoint=function(f){var t=Math.pow(2,r+k-3)/45,s=(f.lon-u.lon)*t*m.x;f=(W(u.lat)-W(f.lat))*t*m.y;
return{x:g.x+y*s-C*f,y:g.y+C*s+y*f}};c.pointLocation=function(f){var t=45/Math.pow(2,r+k-3),s=(f.x-g.x)*t;f=(f.y-g.y)*t;return{lon:u.lon+(E*s-B*f)/m.x,lat:V(W(u.lat)-(B*s+E*f)/m.y)}};var x=q.svg("rect");x.setAttribute("visibility","hidden");x.setAttribute("pointer-events","all");c.container=function(f){if(!arguments.length)return j;j=f;j.setAttribute("class","map");j.appendChild(x);return c.resize()};c.focusableParent=function(){for(var f=j;f;f=f.parentNode)if(f.tabIndex>=0)return f;return window};
c.mouse=function(f){var t=(j.ownerSVGElement||j).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var s=document.body.appendChild(q.svg("svg"));s.style.position="absolute";s.style.top=s.style.left="0px";var A=s.getScreenCTM();$=!(A.f||A.e);document.body.removeChild(s)}if($){t.x=f.pageX;t.y=f.pageY}else{t.x=f.clientX;t.y=f.clientY}return t.matrixTransform(j.getScreenCTM().inverse())};c.size=function(f){if(!arguments.length)return a;e=f;return c.resize()};c.resize=function(){if(e){a=e;R.remove(c)}else{x.setAttribute("width",
"100%");x.setAttribute("height","100%");b=x.getBBox();a={x:b.width,y:b.height};R.add(c)}x.setAttribute("width",a.x);x.setAttribute("height",a.y);g={x:a.x/2,y:a.y/2};i();c.dispatch({type:"resize"});return c};c.tileSize=function(f){if(!arguments.length)return m;m=f;c.dispatch({type:"move"});return c};c.center=function(f){if(!arguments.length)return u;u=f;i();c.dispatch({type:"move"});return c};c.panBy=function(f){var t=45/Math.pow(2,r+k-3),s=f.x*t;f=f.y*t;return c.center({lon:u.lon+(B*f-E*s)/m.x,lat:V(W(u.lat)+
(B*s+E*f)/m.y)})};c.centerRange=function(f){if(!arguments.length)return n;if(n=f){K=n[0].lat>-90?W(n[0].lat):-Infinity;l=n[0].lat<90?W(n[1].lat):Infinity}else{K=-Infinity;l=Infinity}i();c.dispatch({type:"move"});return c};c.zoom=function(f){if(!arguments.length)return r+k;r=f;d();return c.center(u)};c.zoomBy=function(f,t,s){if(arguments.length<2)return c.zoom(r+k+f);if(arguments.length<3)s=c.pointLocation(t);r=r+k+f;d();var A=c.locationPoint(s);return c.panBy({x:t.x-A.x,y:t.y-A.y})};c.zoomRange=function(f){if(!arguments.length)return o;
o=f;return c.zoom(r+k)};c.extent=function(f){if(!arguments.length)return[c.pointLocation({x:0,y:a.y}),c.pointLocation({x:a.x,y:0})];var t=c.locationPoint(f[0]),s=c.locationPoint(f[1]),A=Math.max((s.x-t.x)/a.x,(t.y-s.y)/a.y);t=c.pointLocation({x:(t.x+s.x)/2,y:(t.y+s.y)/2});r=r+k-Math.log(A)/Math.LN2;d();return c.center(t)};c.angle=function(f){if(!arguments.length)return v;v=f;y=Math.cos(v);C=Math.sin(v);E=Math.cos(-v);B=Math.sin(-v);i();c.dispatch({type:"move"});return c};c.add=function(f){f.map(c);
return c};c.remove=function(f){f.map(null);return c};c.dispatch=q.dispatch(c);return c};R.maps=[];R.add=function(d){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==d)return;R.maps.push(d)};R.remove=function(d){for(var i=0;i<R.maps.length;i++)if(R.maps[i]==d){R.maps.splice(i,1);return}};if(window.addEventListener){window.addEventListener("resize",R,false);window.addEventListener("load",R,false)}q.map.locationCoordinate=function(d){var i=1/360;return{column:(d.lon+180)*i,row:(180-W(d.lat))*i,zoom:0}};
q.map.coordinateLocation=function(d){var i=45/Math.pow(2,d.zoom-3);return{lon:i*d.column-180,lat:V(180-i*d.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;q.layer=function(d,i){function c(B){for(var K=C[0].nextSibling;y<B;y++){o.insertBefore(C[-4],K);o.insertBefore(C[2],K);o.insertBefore(C[1],K);for(var l=C[-4],n=-4;n<2;)C[n]=C[++n];C[n]=l}}function j(B){for(var K=C[0].nextSibling;y>B;y--){o.insertBefore(C[-1],K);o.insertBefore(C[2],C[-4]);for(var l=C[2],n=2;n>-4;)C[n]=C[--n];C[n]=l}}function e(){function B(N){var H=
N.zoom,T=H<0?1:1<<H,U=N.column%T,z=N.row;if(U<0)U+=T;return{locationPoint:function(D){D=q.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);return{x:s.x*(G*D.column-U),y:s.y*(G*D.row-z)}}}}function K(N,H,T){var U=I.zoom,z=2-S,D=4+S;for(N=N;N<H;N++){var G=g.load({column:N,row:T,zoom:U},B);if(!G.ready&&!(G.key in O)){G.proxyRefs={};for(var J,M,P,Q=1;Q<=z;Q++){M=true;for(var X=0,da=1<<Q;X<=da;X++)for(var aa=0;aa<=da;aa++)if((P=g.peek(J={column:(N<<Q)+aa,row:(T<<Q)+X,zoom:U+Q}))&&P.ready){O[P.key]=
g.load(J);P.proxyCount++;G.proxyRefs[P.key]=P}else M=false;if(M)break}if(!M)for(Q=1;Q<=D;Q++)if((P=g.peek(J={column:N>>Q,row:T>>Q,zoom:U-Q}))&&P.ready){O[P.key]=g.load(J);P.proxyCount++;G.proxyRefs[P.key]=P;break}}O[G.key]=G}}var l=a.map(),n=l.zoom(),x=n-(n=Math.round(n)),f=l.size(),t=l.angle(),s=l.tileSize(),A=l.locationCoordinate(l.center());if(y!=n){if(y<n)c(n);else if(y>n)j(n);else y=n;for(var w=-4;w<=2;w++){var L=C[w];L.setAttribute("class","zoom"+(w<0?"":"+")+w+" zoom"+(n+w));L.setAttribute("transform",
"scale("+Math.pow(2,-w)+")")}}o.setAttribute("transform","translate("+f.x/2+","+f.y/2+")"+(t?"rotate("+t/Math.PI*180+")":"")+(x?"scale("+Math.pow(2,x)+")":"")+(v?v.zoomFraction(x):""));var I=l.pointCoordinate(A,Y);w=l.pointCoordinate(A,{x:f.x,y:0});n=l.pointCoordinate(A,f);l=l.pointCoordinate(A,{x:0,y:f.y});if(!x&&!t&&!v){A.column=(Math.round(s.x*A.column)+(f.x&1)/2)/s.x;A.row=(Math.round(s.y*A.row)+(f.y&1)/2)/s.y}if(v){I=v.unapply(I);w=v.unapply(w);n=v.unapply(n);l=v.unapply(l);A=v.unapply(A)}var S=
r?r(I.zoom)-I.zoom:0;if(S){f=Math.pow(2,S);I.column*=f;I.row*=f;w.column*=f;w.row*=f;n.column*=f;n.row*=f;l.column*=f;l.row*=f;I.zoom=w.zoom=n.zoom=l.zoom+=S}x=g.locks();var O={};for(var F in x)x[F].proxyCount=0;if(u&&S>-5&&S<3){t=I.zoom<0?1:1<<I.zoom;if(m){ca(I,w,n,0,t,K);ca(n,l,I,0,t,K)}else{f=Math.floor((I.column+n.column)/2);t=Math.max(0,Math.min(t-1,Math.floor((w.row+l.row)/2)));w=Math.min(4,I.zoom);f=f>>w<<w;t=t>>w<<w;K(f,f+1,t)}}for(F in O){w=O[F];f=Math.pow(2,w.level=w.zoom-A.zoom);w.element.setAttribute("transform",
"translate("+(w.x=s.x*(w.column-A.column*f))+","+(w.y=s.y*(w.row-A.row*f))+")")}for(F in x)if(!(F in O)){w=g.unload(F);w.element.parentNode.removeChild(w.element);delete w.proxyRefs}for(F in O){w=O[F];if(w.element.parentNode!=C[w.level]){C[w.level].appendChild(w.element);a.show&&a.show(w)}}g.flush();a.dispatch({type:"move"})}var a={},g=a.cache=q.cache(d,i).size(512),m=true,u=true,r,k,h,o=q.svg("g"),v,y,C={};o.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=o.appendChild(q.svg("g"));for(E=
2;E>=1;E--)C[E]=o.appendChild(q.svg("g"));C[0]=o.appendChild(q.svg("g"));a.map=function(B){if(!arguments.length)return h;if(h){if(h==B){o.parentNode.appendChild(o);return a}h.off("move",e).off("resize",e);o.parentNode.removeChild(o)}if(h=B){h.container().appendChild(o);a.init&&a.init(o);h.on("move",e).on("resize",e);e()}return a};a.container=function(){return o};a.levels=function(){return C};a.id=function(B){if(!arguments.length)return k;k=B;o.setAttribute("id",B);return a};a.visible=function(B){if(!arguments.length)return u;
(u=B)?o.removeAttribute("visibility"):o.setAttribute("visibility","hidden");h&&e();return a};a.transform=function(B){if(!arguments.length)return v;v=B;h&&e();return a};a.zoom=function(B){if(!arguments.length)return r;r=typeof B=="function"||B==null?B:function(){return B};h&&e();return a};a.tile=function(B){if(!arguments.length)return m;m=B;h&&e();return a};a.reload=function(){g.clear();h&&e();return a};a.dispatch=q.dispatch(a);a.on("load",function(B){if(B.tile.proxyRefs){for(var K in B.tile.proxyRefs){var l=
B.tile.proxyRefs[K];--l.proxyCount<=0&&g.unload(K)&&l.element.parentNode.removeChild(l.element)}delete B.tile.proxyRefs}});return a};q.image=function(){var d=q.layer(function(c){var j=c.element=q.svg("image"),e=d.map().tileSize();j.setAttribute("preserveAspectRatio","none");j.setAttribute("width",e.x);j.setAttribute("height",e.y);if(typeof i=="function"){j.setAttribute("opacity",0);e=i(c);if(e!=null)c.request=q.queue.image(j,e,function(a){delete c.request;c.ready=true;c.img=a;j.removeAttribute("opacity");
d.dispatch({type:"load",tile:c})});else{c.ready=true;d.dispatch({type:"load",tile:c})}}else{c.ready=true;i!=null&&j.setAttributeNS(q.ns.xlink,"href",i);d.dispatch({type:"load",tile:c})}},function(c){c.request&&c.request.abort(true)}),i;d.url=function(c){if(!arguments.length)return i;i=typeof c=="string"&&/{.}/.test(c)?q.url(c):c;return d.reload()};return d};q.geoJson=function(d){function i(l){var n={lat:0,lon:0};return function(x){n.lat=x[1];n.lon=x[0];var f=l(n);x.x=f.x;x.y=f.y;return f}}function c(l,
n){return l&&l.type in C&&C[l.type](l,n)}function j(l,n,x){return l.type in E&&E[l.type](l,n,x)}function e(){var l=a.map().zoom(),n=a.cache.locks(),x,f,t,s,A,w,L;if(v=="fixed")for(x in n){if((f=n[x]).scale!=l){L="scale("+Math.pow(2,f.zoom-l)+")";s=-1;for(A=(t=f.features).length;++s<A;)j((w=t[s]).data.geometry,w.element,L);f.scale=l}}else for(x in n){s=-1;for(A=(t=(f=n[x]).features).length;++s<A;)j((w=t[s]).data.geometry,w.element,"");delete f.scale}}var a=q.layer(function(l,n){function x(t){var s=
[];if(t.next)l.request=d(t.next.href,x);switch(t.type){case "FeatureCollection":for(var A=0;A<t.features.length;A++){var w=t.features[A],L=c(w.geometry,n);L&&s.push({element:f.appendChild(L),data:w})}break;case "Feature":(L=c(t.geometry,n))&&s.push({element:f.appendChild(L),data:t});break;default:(L=c(t,n))&&s.push({element:f.appendChild(L),data:{type:"Feature",geometry:t}});break}l.ready=true;s.push.apply(l.features,s);a.dispatch({type:"load",tile:l,features:s})}var f=l.element=q.svg("g");l.features=
[];n=i(n(l).locationPoint);if(m!=null)l.request=d(typeof m=="function"?m(l):m,x);else x({type:"FeatureCollection",features:y||[]})},function(l){l.request&&l.request.abort(true)}),g=a.container(),m,u=true,r="org.polymaps."+q.id(),k="url(#"+r+")",h=g.insertBefore(q.svg("clipPath"),g.firstChild),o=h.appendChild(q.svg("rect")),v="auto",y;g.setAttribute("fill-rule","evenodd");h.setAttribute("id",r);if(!arguments.length)d=q.queue.json;var C={Point:function(l,n){var x=n(l.coordinates),f=q.svg("circle");
f.setAttribute("r",4.5);f.setAttribute("transform","translate("+x.x+","+x.y+")");return f},MultiPoint:function(l,n){for(var x=q.svg("g"),f=l.coordinates,t,s,A=-1,w=f.length;++A<w;){s=x.appendChild(q.svg("circle"));s.setAttribute("r",4.5);s.setAttribute("transform","translate("+(t=n(f[A])).x+","+t.y+")")}return x},LineString:function(l,n){for(var x=q.svg("path"),f=["M"],t=l.coordinates,s,A=-1,w=t.length;++A<w;)f.push((s=n(t[A])).x,",",s.y,"L");f.pop();if(f.length){x.setAttribute("d",f.join(""));return x}},
MultiLineString:function(l,n){for(var x=q.svg("path"),f=[],t=l.coordinates,s,A=-1,w,L=t.length,I;++A<L;){s=t[A];w=-1;I=s.length;for(f.push("M");++w<I;)f.push((p=n(s[w])).x,",",p.y,"L");f.pop()}if(f.length){x.setAttribute("d",f.join(""));return x}},Polygon:function(l,n){for(var x=q.svg("path"),f=[],t=l.coordinates,s,A=-1,w,L=t.length,I;++A<L;){s=t[A];w=-1;I=s.length-1;for(f.push("M");++w<I;)f.push((p=n(s[w])).x,",",p.y,"L");f[f.length-1]="Z"}if(f.length){x.setAttribute("d",f.join(""));return x}},MultiPolygon:function(l,
n){for(var x=q.svg("path"),f=[],t=l.coordinates,s,A,w=-1,L,I,S=t.length,O,F;++w<S;){s=t[w];L=-1;for(O=s.length;++L<O;){A=s[L];I=-1;F=A.length-1;for(f.push("M");++I<F;)f.push((p=n(A[I])).x,",",p.y,"L");f[f.length-1]="Z"}}if(f.length){x.setAttribute("d",f.join(""));return x}},GeometryCollection:function(l,n){for(var x=q.svg("g"),f=-1,t=l.geometries,s=t.length,A;++f<s;)(A=c(t[f],n))&&x.appendChild(A);return x}},E={Point:function(l,n,x){l=l.coordinates;n.setAttribute("transform","translate("+l.x+","+
l.y+")"+x)},MultiPoint:function(l,n,x){l=l.coordinates;var f=-1,t=s.length;n=n.firstChild;for(var s;++f<t;){s=l[f];n.setAttribute("transform","translate("+s.x+","+s.y+")"+x);n=n.nextSibling}}};a.url=function(l){if(!arguments.length)return m;m=typeof l=="string"&&/{.}/.test(l)?q.url(l):l;if(m!=null)y=null;typeof m=="string"&&a.tile(false);return a.reload()};a.features=function(l){if(!arguments.length)return y;if(y=l){m=null;a.tile(false)}return a.reload()};a.clip=function(l){if(!arguments.length)return u;
u&&g.removeChild(h);if(u=l)g.insertBefore(h,g.firstChild);var n=a.cache.locks();for(var x in n)u?n[x].element.setAttribute("clip-path",k):n[x].element.removeAttribute("clip-path");return a};var B=a.tile;a.tile=function(l){arguments.length&&!l&&a.clip(l);return B.apply(a,arguments)};var K=a.map;a.map=function(l){if(l&&o){var n=l.tileSize();o.setAttribute("width",n.x);o.setAttribute("height",n.y)}return K.apply(a,arguments)};a.scale=function(l){if(!arguments.length)return v;(v=l)?a.on("move",e):a.off("move",
e);a.map()&&e();return a};a.show=function(l){u?l.element.setAttribute("clip-path",k):l.element.removeAttribute("clip-path");a.dispatch({type:"show",tile:l,features:l.features});return a};a.reshow=function(){var l=a.cache.locks();for(var n in l)a.show(l[n]);return a};return a};q.dblclick=function(){function d(a){var g=j.zoom();g=a.shiftKey?Math.ceil(g)-g-1:1-g+Math.floor(g);c==="mouse"?j.zoomBy(g,j.mouse(a)):j.zoomBy(g)}var i={},c="mouse",j,e;i.zoom=function(a){if(!arguments.length)return c;c=a;return i};
i.map=function(a){if(!arguments.length)return j;if(j){e.removeEventListener("dblclick",d,false);e=null}if(j=a){e=j.container();e.addEventListener("dblclick",d,false)}return i};return i};q.drag=function(){function d(g){if(!g.shiftKey){a={x:g.clientX,y:g.clientY};j.focusableParent().focus();g.preventDefault();document.body.style.setProperty("cursor","move",null)}}function i(g){if(a){j.panBy({x:g.clientX-a.x,y:g.clientY-a.y});a.x=g.clientX;a.y=g.clientY}}var c={},j,e,a;c.map=function(g){if(!arguments.length)return j;
if(j){e.removeEventListener("mousedown",d,false);e=null}if(j=g){e=j.container();e.addEventListener("mousedown",d,false)}return c};window.addEventListener("mousemove",i,false);window.addEventListener("mouseup",function(g){if(a){i(g);a=null;document.body.style.removeProperty("cursor")}},false);return c};q.wheel=function(){function d(){g=null}function i(h){var o=h.wheelDelta||-h.detail,v;if(o)if(e){try{k.scrollTop=1E3;k.dispatchEvent(h);o=1E3-k.scrollTop}catch(y){}o*=0.0050}else{v=Date.now();if(v-j>
200){o=o>0?+1:-1;j=v}else o=0}if(o)switch(a){case "mouse":v=m.mouse(h);g||(g=m.pointLocation(v));m.off("move",d).zoomBy(o,v,g).on("move",d);break;case "location":m.zoomBy(o,m.locationPoint(g),g);break;default:m.zoomBy(o);break}h.preventDefault();return false}var c={},j=0,e=true,a="mouse",g,m,u,r=document.createElement("div"),k=document.createElement("div");k.style.visibility="hidden";k.style.top="0px";k.style.height="0px";k.style.width="0px";k.style.overflowY="scroll";r.style.height="2000px";k.appendChild(r);
document.body.appendChild(k);c.smooth=function(h){if(!arguments.length)return e;e=h;return c};c.zoom=function(h,o){if(!arguments.length)return a;a=h;g=o;if(m)a=="mouse"?m.on("move",d):m.off("move",d);return c};c.map=function(h){if(!arguments.length)return m;if(m){u.removeEventListener("mousemove",d,false);u.removeEventListener("mousewheel",i,false);u.removeEventListener("MozMousePixelScroll",i,false);u=null;m.off("move",d)}if(m=h){a=="mouse"&&m.on("move",d);u=m.container();u.addEventListener("mousemove",
d,false);u.addEventListener("mousewheel",i,false);u.addEventListener("MozMousePixelScroll",i,false)}return c};return c};q.arrow=function(){function d(v){if(!(v.ctrlKey||v.altKey||v.metaKey)){var y=Date.now(),C=0,E=0;switch(v.keyCode){case 37:if(!a.left){g=y;a.left=1;a.right||(C=k)}break;case 39:if(!a.right){g=y;a.right=1;a.left||(C=-k)}break;case 38:if(!a.up){g=y;a.up=1;a.down||(E=k)}break;case 40:if(!a.down){g=y;a.down=1;a.up||(E=-k)}break;default:return}if(C||E)h.panBy({x:C,y:E});if(!m&&a.left|
a.right|a.up|a.down)m=setInterval(j,r);v.preventDefault()}}function i(v){g=Date.now();switch(v.keyCode){case 37:a.left=0;break;case 39:a.right=0;break;case 38:a.up=0;break;case 40:a.down=0;break;default:return}if(m&&!(a.left|a.right|a.up|a.down))m=clearInterval(m);v.preventDefault()}function c(v){switch(v.charCode){case 45:case 95:h.zoom(Math.ceil(h.zoom())-1);break;case 43:case 61:h.zoom(Math.floor(h.zoom())+1);break;default:return}v.preventDefault()}function j(){if(h)if(!(Date.now()<g+u)){var v=
(a.left-a.right)*k,y=(a.up-a.down)*k;if(v||y)h.panBy({x:v,y:y})}}var e={},a={left:0,right:0,up:0,down:0},g=0,m,u=250,r=50,k=16,h,o;e.map=function(v){if(!arguments.length)return h;if(h){o.removeEventListener("keypress",c,false);o.removeEventListener("keydown",d,false);o.removeEventListener("keyup",i,false);o=null}if(h=v){o=h.focusableParent();o.addEventListener("keypress",c,false);o.addEventListener("keydown",d,false);o.addEventListener("keyup",i,false)}return e};e.speed=function(v){if(!arguments.length)return k;
k=v;return e};return e};q.hash=function(){function d(){var m=g(e);if(j!==m)location.replace(j=m)}function i(){if(location.hash!==j)if(a(e,(j=location.hash).substring(1)))d()}var c={},j,e,a=function(m,u){var r=u.split("/").map(Number);if(r.length<3||r.some(isNaN))return true;else{var k=m.size();m.zoomBy(r[0]-m.zoom(),{x:k.x/2,y:k.y/2},{lat:Math.min(89.99999999,Math.max(-89.99999999,r[1])),lon:r[2]})}},g=function(m){var u=m.center();m=m.zoom();var r=Math.max(0,Math.ceil(Math.log(m)/Math.LN2));return"#"+
m.toFixed(2)+"/"+u.lat.toFixed(r)+"/"+u.lon.toFixed(r)};c.map=function(m){if(!arguments.length)return e;if(e){e.off("move",d);window.removeEventListener("hashchange",i,false)}if(e=m){e.on("move",d);window.addEventListener("hashchange",i,false);location.hash?i():d()}return c};c.parser=function(m){if(!arguments.length)return a;a=m;return c};c.formatter=function(m){if(!arguments.length)return g;g=m;return c};return c};q.touch=function(){function d(k){var h=-1,o=k.touches.length,v=Date.now();if(o==1&&
v-g<300){var y=j.zoom();j.zoomBy(1-y+Math.floor(y),j.mouse(k.touches[0]));k.preventDefault()}g=v;m=j.zoom();for(u=j.angle();++h<o;){v=k.touches[h];r[v.identifier]=j.pointLocation(j.mouse(v))}}function i(k){switch(k.touches.length){case 1:var h=k.touches[0];j.zoomBy(0,j.mouse(h),r[h.identifier]);k.preventDefault();break;case 2:h=k.touches[0];var o=k.touches[1],v=j.mouse(h),y=j.mouse(o);v={x:(v.x+y.x)/2,y:(v.y+y.y)/2};h=q.map.locationCoordinate(r[h.identifier]);o=q.map.locationCoordinate(r[o.identifier]);
o=q.map.coordinateLocation({row:(h.row+o.row)/2,column:(h.column+o.column)/2,zoom:0});j.zoomBy(Math.log(k.scale)/Math.LN2+m-j.zoom(),v,o);a&&j.angle(k.rotation/180*Math.PI+u);k.preventDefault();break}}var c={},j,e,a=false,g=0,m,u,r={};c.rotate=function(k){if(!arguments.length)return a;a=k;return c};c.map=function(k){if(!arguments.length)return j;if(j){e.removeEventListener("touchstart",d,false);window.removeEventListener("touchmove",i,false);e=null}if(j=k){e=j.container();e.addEventListener("touchstart",
d,false);window.addEventListener("touchmove",i,false)}return c};return c};q.interact=function(){var d={},i=q.drag(),c=q.wheel(),j=q.dblclick(),e=q.touch(),a=q.arrow();d.map=function(g){i.map(g);c.map(g);j.map(g);e.map(g);a.map(g);return d};return d};q.compass=function(){function d(z){B.setAttribute("class","compass active");I||(I=setInterval(i,t));S&&H.panBy(S);x=Date.now();return k(z)}function i(){S&&Date.now()>x+f&&H.panBy(S)}function c(z){if(z.shiftKey){F={x0:H.mouse(z)};H.focusableParent().focus();
return k(z)}}function j(z){if(F){F.x1=H.mouse(z);N.setAttribute("x",Math.min(F.x0.x,F.x1.x));N.setAttribute("y",Math.min(F.x0.y,F.x1.y));N.setAttribute("width",Math.abs(F.x0.x-F.x1.x));N.setAttribute("height",Math.abs(F.x0.y-F.x1.y));N.removeAttribute("display")}}function e(){B.setAttribute("class","compass");if(F){if(F.x1){H.extent([H.pointLocation({x:Math.min(F.x0.x,F.x1.x),y:Math.max(F.x0.y,F.x1.y)}),H.pointLocation({x:Math.max(F.x0.x,F.x1.x),y:Math.min(F.x0.y,F.x1.y)})]);N.setAttribute("display",
"none")}F=null}if(I){clearInterval(I);I=0}}function a(z){return function(){z?this.setAttribute("class","active"):this.removeAttribute("class");S=z}}function g(z){return function(D){B.setAttribute("class","compass active");var G=H.zoom();H.zoom(z<0?Math.ceil(G)-1:Math.floor(G)+1);return k(D)}}function m(z){return function(D){H.zoom(z);return k(D)}}function u(){this.setAttribute("class","active")}function r(){this.removeAttribute("class")}function k(z){z.stopPropagation();z.preventDefault();return false}
function h(z){var D=Math.SQRT1_2*l,G=l*0.7,J=l*0.2,M=q.svg("g"),P=M.appendChild(q.svg("path")),Q=M.appendChild(q.svg("path"));P.setAttribute("class","direction");P.setAttribute("pointer-events","all");P.setAttribute("d","M0,0L"+D+","+D+"A"+l+","+l+" 0 0,1 "+-D+","+D+"Z");Q.setAttribute("class","chevron");Q.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));Q.setAttribute("pointer-events","none");M.addEventListener("mousedown",d,false);M.addEventListener("mouseover",a(z),false);M.addEventListener("mouseout",
a(null),false);M.addEventListener("dblclick",k,false);return M}function o(z){var D=l*0.4,G=D/2,J=q.svg("g"),M=J.appendChild(q.svg("path")),P=J.appendChild(q.svg("path")),Q=J.appendChild(q.svg("path")),X=J.appendChild(q.svg("path"));M.setAttribute("class","back");M.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");P.setAttribute("class","direction");P.setAttribute("d",M.getAttribute("d"));Q.setAttribute("class","chevron");Q.setAttribute("d","M"+-G+","+-D+"H"+G+(z>0?"M0,"+(-D-G)+
"V"+-G:""));X.setAttribute("class","fore");X.setAttribute("fill","none");X.setAttribute("d",M.getAttribute("d"));J.addEventListener("mousedown",g(z),false);J.addEventListener("mouseover",u,false);J.addEventListener("mouseout",r,false);J.addEventListener("dblclick",k,false);return J}function v(z){var D=l*0.2,G=l*0.4,J=q.svg("g"),M=J.appendChild(q.svg("rect")),P=J.appendChild(q.svg("path"));M.setAttribute("pointer-events","all");M.setAttribute("fill","none");M.setAttribute("x",-G);M.setAttribute("y",
-0.75*G);M.setAttribute("width",2*G);M.setAttribute("height",1.5*G);P.setAttribute("class","chevron");P.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",m(z),false);J.addEventListener("dblclick",k,false);return J}function y(){var z=l+6,D=z,G=H.size();switch(s){case "top-left":break;case "top-right":z=G.x-z;break;case "bottom-left":D=G.y-D;break;case "bottom-right":z=G.x-z;D=G.y-D;break}B.setAttribute("transform","translate("+z+","+D+")");N.setAttribute("transform","translate("+-z+","+
-D+")");for(var J in K)J==H.zoom()?K[J].setAttribute("class","active"):K[J].removeAttribute("class")}function C(){for(;B.lastChild;)B.removeChild(B.lastChild);B.appendChild(N);if(L!="none"){O=B.appendChild(q.svg("g"));O.setAttribute("class","pan");var z=O.appendChild(q.svg("circle"));z.setAttribute("class","back");z.setAttribute("r",l);O.appendChild(h({x:0,y:-n})).setAttribute("transform","rotate(0)");O.appendChild(h({x:n,y:0})).setAttribute("transform","rotate(90)");O.appendChild(h({x:0,y:n})).setAttribute("transform",
"rotate(180)");O.appendChild(h({x:-n,y:0})).setAttribute("transform","rotate(270)");z=O.appendChild(q.svg("circle"));z.setAttribute("fill","none");z.setAttribute("class","fore");z.setAttribute("r",l)}else O=null;if(A!="none"){w=B.appendChild(q.svg("g"));w.setAttribute("class","zoom");z=-0.5;if(A=="big"){K={};var D=H.zoomRange()[0];for(z=0;D<=H.zoomRange()[1];D++,z++)(K[D]=w.appendChild(v(D))).setAttribute("transform","translate(0,"+-(z+0.75)*l*0.4+")")}D=L=="none"?0.4:2;w.setAttribute("transform",
"translate(0,"+l*(/^top-/.test(s)?D+(z+0.5)*0.4:-D)+")");w.appendChild(o(+1)).setAttribute("transform","translate(0,"+-(z+0.5)*l*0.4+")");w.appendChild(o(-1)).setAttribute("transform","scale(-1)")}else w=null;y()}var E={},B=q.svg("g"),K={},l=30,n=16,x=0,f=250,t=50,s="top-left",A="small",w,L="small",I,S,O,F,N=q.svg("rect"),H,T,U;B.setAttribute("class","compass");N.setAttribute("class","back fore");N.setAttribute("pointer-events","none");N.setAttribute("display","none");E.radius=function(z){if(!arguments.length)return l;
l=z;H&&C();return E};E.speed=function(z){if(!arguments.length)return l;n=z;return E};E.position=function(z){if(!arguments.length)return s;s=z;H&&C();return E};E.pan=function(z){if(!arguments.length)return L;L=z;H&&C();return E};E.zoom=function(z){if(!arguments.length)return A;A=z;H&&C();return E};E.map=function(z){if(!arguments.length)return H;if(H){T.removeEventListener("mousedown",c,false);T.removeChild(B);T=null;U.removeEventListener("mousemove",j,false);U.removeEventListener("mouseup",e,false);
U=null;H.off("move",y).off("resize",y)}if(H=z){T=H.container();T.appendChild(B);T.addEventListener("mousedown",c,false);U=T.ownerDocument.defaultView;U.addEventListener("mousemove",j,false);U.addEventListener("mouseup",e,false);H.on("move",y).on("resize",y);C()}return E};return E};q.grid=function(){function d(){var e=j.firstChild,a=c.size(),g=c.pointLocation(Y);c.pointLocation(a);var m=Math.pow(2,4-Math.round(c.zoom()));g.lat=Math.floor(g.lat/m)*m;g.lon=Math.ceil(g.lon/m)*m;for(var u;(u=c.locationPoint(g).x)<=
a.x;g.lon+=m){e||(e=j.appendChild(q.svg("line")));e.setAttribute("x1",u);e.setAttribute("x2",u);e.setAttribute("y1",0);e.setAttribute("y2",a.y);e=e.nextSibling}for(;(u=c.locationPoint(g).y)<=a.y;g.lat-=m){e||(e=j.appendChild(q.svg("line")));e.setAttribute("y1",u);e.setAttribute("y2",u);e.setAttribute("x1",0);e.setAttribute("x2",a.x);e=e.nextSibling}for(;e;){a=e.nextSibling;j.removeChild(e);e=a}}var i={},c,j=q.svg("g");j.setAttribute("class","grid");i.map=function(e){if(!arguments.length)return c;
if(c){j.parentNode.removeChild(j);c.off("move",d).off("resize",d)}if(c=e){c.on("move",d).on("resize",d);c.container().appendChild(j);c.dispatch({type:"move"})}return i};return i};q.stylist=function(){function d(e){var a=e.features.length,g=i.length,m=c.length,u,r,k,h,o,v;for(o=0;o<a;++o)if(r=(u=e.features[o]).element){u=u.data;for(v=0;v<g;++v){h=(k=i[v]).value;if(typeof h==="function")h=h.call(null,u);h==null?k.name.local?r.removeAttributeNS(k.name.space,k.name.local):r.removeAttribute(k.name):k.name.local?
r.setAttributeNS(k.name.space,k.name.local,h):r.setAttribute(k.name,h)}for(v=0;v<m;++v){h=(k=c[v]).value;if(typeof h==="function")h=h.call(null,u);h==null?r.style.removeProperty(k.name):r.style.setProperty(k.name,h,k.priority)}if(h=j){if(typeof h==="function")h=h.call(null,u);for(;r.lastChild;)r.removeChild(r.lastChild);h!=null&&r.appendChild(q.svg("title")).appendChild(document.createTextNode(h))}}}var i=[],c=[],j;d.attr=function(e,a){i.push({name:ea(e),value:a});return d};d.style=function(e,a,g){c.push({name:e,
value:a,priority:arguments.length<3?null:g});return d};d.title=function(e){j=e;return d};return d}})(org.polymaps);
