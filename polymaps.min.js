if(!org)var org={};if(!org.polymaps)org.polymaps={};
(function(r){function fa(e){var f=e.indexOf(":");return f<0?e:{space:r.ns[e.substring(0,f)],local:e.substring(f+1)}}function Q(){for(var e=0;e<Q.maps.length;e++)Q.maps[e].resize()}function U(e){return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function V(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}function Z(e,f){if(e.row>f.row){var a=e;e=f;f=a}return{x0:e.column,y0:e.row,x1:f.column,y1:f.row,dx:f.column-e.column,dy:f.row-e.row}}function ca(e,f,a,g,h){a=Math.max(a,Math.floor(f.y0));
g=Math.min(g,Math.ceil(f.y1));if(e.x0==f.x0&&e.y0==f.y0?e.x0+f.dy/e.dy*e.dx<f.x1:e.x1-f.dy/e.dy*e.dx<f.x0){var c=e;e=f;f=c}c=e.dx/e.dy;var d=f.dx/f.dy,l=e.dx>0,n=f.dx<0;for(a=a;a<g;a++){var q=c*Math.max(0,Math.min(e.dy,a+l-e.y0))+e.x0;h(Math.floor(d*Math.max(0,Math.min(f.dy,a+n-f.y0))+f.x0),Math.ceil(q),a)}}function da(e,f,a,g,h,c){var d=Z(e,f);f=Z(f,a);e=Z(a,e);if(d.dy>f.dy){a=d;d=f;f=a}if(d.dy>e.dy){a=d;d=e;e=a}if(f.dy>e.dy){a=f;f=e;e=a}d.dy&&ca(e,d,g,h,c);f.dy&&ca(e,f,g,h,c)}r.version="2.2.0";
var Y={x:0,y:0};r.ns={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};r.id=function(){var e=0;return function(){return++e}}();r.svg=function(e){return document.createElementNS(r.ns.svg,e)};r.transform=function(e,f,a,g,h,c){var d={},l,n,q;if(!arguments.length){e=1;f=h=a=0;g=1;c=0}d.zoomFraction=function(k){if(!arguments.length)return n;n=k;l=Math.floor(n+Math.log(Math.sqrt(e*e+f*f+a*a+g*g))/Math.log(2));q=Math.pow(2,-l);return d};d.apply=function(k){var i=Math.pow(2,-k.zoom),
s=Math.pow(2,k.zoom-l);return{column:(e*k.column*i+a*k.row*i+h)*s,row:(f*k.column*i+g*k.row*i+c)*s,zoom:k.zoom-l}};d.unapply=function(k){var i=Math.pow(2,-k.zoom),s=Math.pow(2,k.zoom+l);return{column:(k.column*i*g-k.row*i*a-h*g+c*a)/(e*g-f*a)*s,row:(k.column*i*f-k.row*i*e-h*f+c*e)/(a*f-g*e)*s,zoom:k.zoom+l}};d.toString=function(){return"matrix("+[e*q,f*q,a*q,g*q].join(" ")+" 0 0)"};return d.zoomFraction(0)};r.cache=function(e,f){function a(i){k--;f&&f(i);delete d[i.key];if(i.next)i.next.prev=i.prev;
else if(n=i.prev)n.next=null;if(i.prev)i.prev.next=i.next;else if(l=i.next)l.prev=null}function g(){for(var i=n;k>q;i=i.prev){if(!i)break;i.lock||a(i)}}var h={},c={},d={},l=null,n=null,q=64,k=0;h.peek=function(i){return d[[i.zoom,i.column,i.row].join("/")]};h.load=function(i,s){var w=[i.zoom,i.column,i.row].join("/"),y=d[w];if(y){if(y.prev){if(y.prev.next=y.next)y.next.prev=y.prev;else n=y.prev;y.prev=null;y.next=l;l=l.prev=y}y.lock=1;return c[w]=y}y={key:w,column:i.column,row:i.row,zoom:i.zoom,next:l,
prev:null,lock:1};e.call(null,y,s);c[w]=d[w]=y;if(l)l.prev=y;else n=y;l=y;k++;return y};h.unload=function(i){if(!(i in c))return false;var s=c[i];s.lock=0;delete c[i];s.request&&s.request.abort(false)&&a(s);return s};h.locks=function(){return c};h.size=function(i){if(!arguments.length)return q;q=i;g();return h};h.flush=function(){g();return h};h.clear=function(){for(var i in d){var s=d[i];s.request&&s.request.abort(false);f&&f(d[i]);if(s.lock){s.lock=0;s.element.parentNode.removeChild(s.element)}}c=
{};d={};l=n=null;k=0;return h};return h};r.url=function(e){function f(g){var h=g.zoom<0?1:1<<g.zoom,c=g.column%h;if(c<0)c+=h;return e.replace(/{(.)}/g,function(d,l){switch(l){case "S":return a[(Math.abs(g.zoom)+g.row+c)%a.length];case "Z":return g.zoom;case "X":return c;case "Y":return g.row;case "B":var n=r.map.coordinateLocation({row:g.row,column:c,zoom:g.zoom}),q=r.map.coordinateLocation({row:g.row+1,column:c+1,zoom:g.zoom}),k=Math.ceil(Math.log(g.zoom)/Math.LN2);return q.lat.toFixed(k)+","+n.lon.toFixed(k)+
","+n.lat.toFixed(k)+","+q.lon.toFixed(k)}return l})}var a=[];f.template=function(g){if(!arguments.length)return e;e=g;return f};f.hosts=function(g){if(!arguments.length)return a;a=g;return f};return f};r.dispatch=function(e){var f={};e.on=function(a,g){for(var h=f[a]||(f[a]=[]),c=0;c<h.length;c++)if(h[c].handler==g)return e;h.push({handler:g,on:true});return e};e.off=function(a,g){var h=f[a];if(h)for(var c=0;c<h.length;c++){var d=h[c];if(d.handler==g){d.on=false;h.splice(c,1);break}}return e};return function(a){var g=
f[a.type];if(g){g=g.slice();for(var h=0;h<g.length;h++){var c=g[h];c.on&&c.handler.call(e,a)}}}};r.queue=function(){function e(){if(!(h>=c||!g.length)){h++;g.pop()()}}function f(d){for(var l=0;l<g.length;l++)if(g[l]==d){g.splice(l,1);return true}return false}function a(d,l,n){function q(){k=new XMLHttpRequest;n&&k.overrideMimeType(n);k.open("GET",d,true);k.onreadystatechange=function(){if(k.readyState==4){h--;k.status<300&&l(k);e()}};k.send(null)}var k;g.push(q);e();return{abort:function(i){if(f(q))return true;
if(i&&k){k.abort();return true}return false}}}var g=[],h=0,c=6;return{text:function(d,l,n){return a(d,function(q){q.responseText&&l(q.responseText)},n)},xml:function(d,l){return a(d,function(n){n.responseXML&&l(n.responseXML)},"application/xml")},json:function(d,l){return a(d,function(n){n.responseText&&l(JSON.parse(n.responseText))},"application/json")},image:function(d,l,n){function q(){k=document.createElement("img");k.onerror=function(){h--;e()};k.onload=function(){h--;n(k);e()};k.src=l;d.setAttributeNS(r.ns.xlink,
"href",l)}var k;g.push(q);e();return{abort:function(i){if(f(q))return true;if(i&&k){k.src="about:";return true}return false}}}}}();r.map=function(){function e(){if(s)if(q<s[0])q=s[0];else if(q>s[1])q=s[1];k=q-(q=Math.round(q));i=Math.pow(2,k)}function f(){if(u){var j=45/Math.pow(2,q+k-3),t=Math.max(Math.abs(C*d.x+y*d.y),Math.abs(A*d.x+E*d.y)),z=U(m-t*j/l.y);t=U(o+t*j/l.y);n.lat=Math.max(z,Math.min(t,n.lat));z=Math.max(Math.abs(C*d.y+y*d.x),Math.abs(A*d.y+E*d.x));n.lon=Math.max(u[0].lon-z*j/l.x,Math.min(u[1].lon+
z*j/l.x,n.lon))}}var a={},g,h,c=Y,d=Y,l={x:256,y:256},n={lat:37.76487,lon:-122.41948},q=12,k=0,i=1,s=[1,18],w=0,y=1,C=0,E=1,A=0,m=-180,o=180,u=[{lat:U(m),lon:-Infinity},{lat:U(o),lon:Infinity}];a.locationCoordinate=function(j){j=r.map.locationCoordinate(j);var t=Math.pow(2,q);j.column*=t;j.row*=t;j.zoom+=q;return j};a.coordinateLocation=r.map.coordinateLocation;a.coordinatePoint=function(j,t){var z=Math.pow(2,q-t.zoom),F=Math.pow(2,q-j.zoom),x=(t.column*z-j.column*F)*l.x*i;z=(t.row*z-j.row*F)*l.y*
i;return{x:d.x+y*x-C*z,y:d.y+C*x+y*z}};a.pointCoordinate=function(j,t){var z=Math.pow(2,q-j.zoom),F=(t.x-d.x)/i,x=(t.y-d.y)/i;return{column:j.column*z+(E*F-A*x)/l.x,row:j.row*z+(A*F+E*x)/l.y,zoom:q}};a.locationPoint=function(j){var t=Math.pow(2,q+k-3)/45,z=(j.lon-n.lon)*t*l.x;j=(V(n.lat)-V(j.lat))*t*l.y;return{x:d.x+y*z-C*j,y:d.y+C*z+y*j}};a.pointLocation=function(j){var t=45/Math.pow(2,q+k-3),z=(j.x-d.x)*t;j=(j.y-d.y)*t;return{lon:n.lon+(E*z-A*j)/l.x,lat:U(V(n.lat)-(A*z+E*j)/l.y)}};var B=r.svg("rect");
B.setAttribute("visibility","hidden");B.setAttribute("pointer-events","all");a.container=function(j){if(!arguments.length)return g;g=j;g.setAttribute("class","map");g.appendChild(B);return a.resize()};a.focusableParent=function(){for(var j=g;j;j=j.parentNode)if(j.tabIndex>=0)return j;return window};a.mouse=function(j){var t=(g.ownerSVGElement||g).createSVGPoint();if($<0&&(window.scrollX||window.scrollY)){var z=document.body.appendChild(r.svg("svg"));z.style.position="absolute";z.style.top=z.style.left=
"0px";var F=z.getScreenCTM();$=!(F.f||F.e);document.body.removeChild(z)}if($){t.x=j.pageX;t.y=j.pageY}else{t.x=j.clientX;t.y=j.clientY}return t.matrixTransform(g.getScreenCTM().inverse())};a.size=function(j){if(!arguments.length)return c;h=j;return a.resize()};a.resize=function(){if(h){c=h;Q.remove(a)}else{var j=g.ownerSVGElement||g;if(j.offsetWidth==null){B.setAttribute("width","100%");B.setAttribute("height","100%");j=B}b=j.getClientRects()[0];c={x:b.width,y:b.height};Q.add(a)}B.setAttribute("width",
c.x);B.setAttribute("height",c.y);d={x:c.x/2,y:c.y/2};f();a.dispatch({type:"resize"});return a};a.tileSize=function(j){if(!arguments.length)return l;l=j;a.dispatch({type:"move"});return a};a.center=function(j){if(!arguments.length)return n;n=j;f();a.dispatch({type:"move"});return a};a.panBy=function(j){var t=45/Math.pow(2,q+k-3),z=j.x*t;j=j.y*t;return a.center({lon:n.lon+(A*j-E*z)/l.x,lat:U(V(n.lat)+(A*z+E*j)/l.y)})};a.centerRange=function(j){if(!arguments.length)return u;if(u=j){m=u[0].lat>-90?V(u[0].lat):
-Infinity;o=u[0].lat<90?V(u[1].lat):Infinity}else{m=-Infinity;o=Infinity}f();a.dispatch({type:"move"});return a};a.zoom=function(j){if(!arguments.length)return q+k;q=j;e();return a.center(n)};a.zoomBy=function(j,t,z){if(arguments.length<2)return a.zoom(q+k+j);if(arguments.length<3)z=a.pointLocation(t);q=q+k+j;e();var F=a.locationPoint(z);return a.panBy({x:t.x-F.x,y:t.y-F.y})};a.zoomRange=function(j){if(!arguments.length)return s;s=j;return a.zoom(q+k)};a.extent=function(j){if(!arguments.length)return[a.pointLocation({x:0,
y:c.y}),a.pointLocation({x:c.x,y:0})];var t=a.locationPoint(j[0]),z=a.locationPoint(j[1]),F=Math.max((z.x-t.x)/c.x,(t.y-z.y)/c.y);t=a.pointLocation({x:(t.x+z.x)/2,y:(t.y+z.y)/2});q=q+k-Math.log(F)/Math.log(2);e();return a.center(t)};a.angle=function(j){if(!arguments.length)return w;w=j;y=Math.cos(w);C=Math.sin(w);E=Math.cos(-w);A=Math.sin(-w);f();a.dispatch({type:"move"});return a};a.add=function(j){j.map(a);return a};a.remove=function(j){j.map(null);return a};a.dispatch=r.dispatch(a);return a};Q.maps=
[];Q.add=function(e){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==e)return;Q.maps.push(e)};Q.remove=function(e){for(var f=0;f<Q.maps.length;f++)if(Q.maps[f]==e){Q.maps.splice(f,1);return}};window.addEventListener("resize",Q,false);r.map.locationCoordinate=function(e){var f=1/360;return{column:(e.lon+180)*f,row:(180-V(e.lat))*f,zoom:0}};r.map.coordinateLocation=function(e){var f=45/Math.pow(2,e.zoom-3);return{lon:f*e.column-180,lat:U(180-f*e.row)}};var $=/WebKit/.test(navigator.userAgent)?-1:0;r.layer=
function(e,f){function a(A){for(var m=C[0].nextSibling;y<A;y++){s.insertBefore(C[-4],m);s.insertBefore(C[2],m);s.insertBefore(C[1],m);for(var o=C[-4],u=-4;u<2;)C[u]=C[++u];C[u]=o}}function g(A){for(var m=C[0].nextSibling;y>A;y--){s.insertBefore(C[-1],m);s.insertBefore(C[2],C[-4]);for(var o=C[2],u=2;u>-4;)C[u]=C[--u];C[u]=o}}function h(){function A(L){var H=L.zoom,R=H<0?1:1<<H,S=L.column%R,v=L.row;if(S<0)S+=R;return{locationPoint:function(D){D=r.map.locationCoordinate(D);var G=Math.pow(2,H-D.zoom);
return{x:z.x*(G*D.column-S),y:z.y*(G*D.row-v)}}}}function m(L,H,R){var S=O.zoom,v=2-T,D=4+T;for(L=L;L<H;L++){var G=d.load({column:L,row:R,zoom:S},A);if(!G.ready&&!(G.key in N)){G.proxyRefs={};for(var J,K,M,P=1;P<=v;P++){K=true;for(var W=0,ea=1<<P;W<=ea;W++)for(var aa=0;aa<=ea;aa++)if((M=d.peek(J={column:(L<<P)+aa,row:(R<<P)+W,zoom:S+P}))&&M.ready){N[M.key]=d.load(J);M.proxyCount++;G.proxyRefs[M.key]=M}else K=false;if(K)break}if(!K)for(P=1;P<=D;P++)if((M=d.peek(J={column:L>>P,row:R>>P,zoom:S-P}))&&
M.ready){N[M.key]=d.load(J);M.proxyCount++;G.proxyRefs[M.key]=M;break}}N[G.key]=G}}var o=c.map(),u=o.zoom(),B=u-(u=Math.round(u)),j=o.size(),t=o.angle(),z=o.tileSize(),F=o.locationCoordinate(o.center());if(y!=u){if(y<u)a(u);else if(y>u)g(u);else y=u;for(var x=-4;x<=2;x++){var X=C[x];X.setAttribute("class","zoom"+(x<0?"":"+")+x+" zoom"+(u+x));X.setAttribute("transform","scale("+Math.pow(2,-x)+")")}}s.setAttribute("transform","translate("+j.x/2+","+j.y/2+")"+(t?"rotate("+t/Math.PI*180+")":"")+(B?"scale("+
Math.pow(2,B)+")":"")+(w?w.zoomFraction(B):""));var O=o.pointCoordinate(F,Y);x=o.pointCoordinate(F,{x:j.x,y:0});u=o.pointCoordinate(F,j);o=o.pointCoordinate(F,{x:0,y:j.y});if(!B&&!t&&!w){F.column=(Math.round(z.x*F.column)+(j.x&1)/2)/z.x;F.row=(Math.round(z.y*F.row)+(j.y&1)/2)/z.y}if(w){O=w.unapply(O);x=w.unapply(x);u=w.unapply(u);o=w.unapply(o);F=w.unapply(F)}var T=q?q(O.zoom)-O.zoom:0;if(T){t=Math.pow(2,T);O.column*=t;O.row*=t;x.column*=t;x.row*=t;u.column*=t;u.row*=t;o.column*=t;o.row*=t;O.zoom=
x.zoom=u.zoom=o.zoom+=T}B=d.locks();var N={};for(var I in B)B[I].proxyCount=0;if(n&&T>-5&&T<3){t=O.zoom<0?1:1<<O.zoom;if(l){da(O,x,u,0,t,m);da(u,o,O,0,t,m)}else{j=Math.floor((O.column+u.column)/2);t=Math.max(0,Math.min(t-1,Math.floor((x.row+o.row)/2)));x=Math.min(4,O.zoom);j=j>>x<<x;t=t>>x<<x;m(j,j+1,t)}}for(I in N){x=N[I];t=Math.pow(2,x.level=x.zoom-F.zoom);j=z.x*(x.column-F.column*t);t=z.y*(x.row-F.row*t);x.element.setAttribute("transform","translate("+j+","+t+")")}for(I in B)if(!(I in N)){x=d.unload(I);
x.element.parentNode.removeChild(x.element);delete x.proxyRefs}for(I in N){x=N[I];if(x.element.parentNode!=C[x.level]){C[x.level].appendChild(x.element);c.show&&c.show(x)}}d.flush()}var c={},d=c.cache=r.cache(e,f).size(512),l=true,n=true,q,k,i,s=r.svg("g"),w,y,C={};s.setAttribute("class","layer");for(var E=-4;E<=-1;E++)C[E]=s.appendChild(r.svg("g"));for(E=2;E>=1;E--)C[E]=s.appendChild(r.svg("g"));C[0]=s.appendChild(r.svg("g"));c.map=function(A){if(!arguments.length)return i;if(i){if(i==A){s.parentNode.appendChild(s);
return c}i.off("move",h).off("resize",h);s.parentNode.removeChild(s)}if(i=A){i.container().appendChild(s);c.init&&c.init(s);i.on("move",h).on("resize",h);h()}return c};c.container=function(){return s};c.id=function(A){if(!arguments.length)return k;k=A;s.setAttribute("id",A);return c};c.visible=function(A){if(!arguments.length)return n;(n=A)?s.removeAttribute("visibility"):s.setAttribute("visibility","hidden");i&&h();return c};c.transform=function(A){if(!arguments.length)return w;w=A;i&&h();return c};
c.zoom=function(A){if(!arguments.length)return q;q=typeof A=="function"||A==null?A:function(){return A};i&&h();return c};c.tile=function(A){if(!arguments.length)return l;l=A;i&&h();return c};c.reload=function(){d.clear();i&&h();return c};c.dispatch=r.dispatch(c);c.on("load",function(A){if(A.tile.proxyRefs){for(var m in A.tile.proxyRefs){var o=A.tile.proxyRefs[m];--o.proxyCount<=0&&d.unload(m)&&o.element.parentNode.removeChild(o.element)}delete A.tile.proxyRefs}});return c};r.image=function(){var e=
r.layer(function(a){var g=a.element=r.svg("image"),h=e.map().tileSize();g.setAttribute("preserveAspectRatio","none");g.setAttribute("width",h.x);g.setAttribute("height",h.y);g.setAttribute("opacity",0);if(typeof f=="function")a.request=r.queue.image(g,f(a),function(c){delete a.request;a.ready=true;a.img=c;g.removeAttribute("opacity");e.dispatch({type:"load",tile:a})});else{a.ready=true;g.setAttributeNS(r.ns.xlink,"href",f);e.dispatch({type:"load",tile:a})}},function(a){a.request&&a.request.abort(true)}),
f="about:blank";e.url=function(a){if(!arguments.length)return f;f=typeof a=="string"&&/{.}/.test(a)?r.url(a):a;return e.reload()};return e};r.geoJson=function(e){function f(m,o){return m&&m.type in C&&C[m.type](m,o)}function a(m,o){var u=o({lat:m[1],lon:m[0]}),B=r.svg("circle");B.setAttribute("r",4.5);B.setAttribute("cx",u.x);B.setAttribute("cy",u.y);return B}function g(m,o,u,B){B.push("M");for(var j=0;j<m.length-o;j++){p=u({lat:m[j][1],lon:m[j][0]});B.push(p.x);B.push(",");B.push(p.y);B.push("L")}B.pop()}
function h(m,o,u,B){for(var j=0;j<m.length;j++)g(m[j],o,u,B);o&&B.push("Z")}function c(m,o,u,B){for(var j=[],t=0;t<o.length;t++)m(o[t],u,B,j);if(j.length){m=r.svg("path");m.setAttribute("d",j.join(""));return m}}var d=r.layer(function(m,o){function u(j){var t=[];if(j.next)m.request=e(j.next.href,u);switch(j.type){case "FeatureCollection":for(var z=0;z<j.features.length;z++){var F=j.features[z],x=f(F.geometry,o.locationPoint);x&&t.push({element:B.appendChild(x),data:F})}break;case "Feature":(x=f(j.geometry,
o.locationPoint))&&t.push({element:B.appendChild(x),data:j});break;default:(x=f(j,o.locationPoint))&&t.push({element:B.appendChild(x),data:{type:"Feature",geometry:j}});break}m.ready=true;t.push.apply(m.features,t);d.dispatch({type:"load",tile:m,features:t})}var B=m.element=r.svg("g");m.features=[];o=o(m);if(y)u({type:"FeatureCollection",features:y});else m.request=e(typeof n=="function"?n(m):n,u)},function(m){m.request&&m.request.abort(true)}),l=d.container(),n="about:blank",q=true,k="org.polymaps."+
r.id(),i="url(#"+k+")",s=l.insertBefore(r.svg("clipPath"),l.firstChild),w=s.appendChild(r.svg("rect")),y;l.setAttribute("fill-rule","evenodd");s.setAttribute("id",k);if(!arguments.length)e=r.queue.json;var C={Point:function(m,o){return a(m.coordinates,o)},MultiPoint:function(m,o){for(var u=r.svg("g"),B=0;B<m.coordinates.length;B++)u.appendChild(a(m.coordinates[B],o));return u},LineString:function(m,o){return c(g,[m.coordinates],0,o)},MultiLineString:function(m,o){return c(g,m.coordinates,0,o)},Polygon:function(m,
o){return c(h,[m.coordinates],1,o)},MultiPolygon:function(m,o){return c(h,m.coordinates||m.coords,1,o)},GeometryCollection:function(m,o){for(var u=r.svg("g"),B=0;B<m.geometries.length;B++){var j=f(m.geometries[B],o);j&&u.appendChild(j)}return u}};d.url=function(m){if(!arguments.length)return n;n=typeof m=="string"&&/{.}/.test(m)?r.url(m):m;typeof n=="string"&&d.tile(false);return d.reload()};d.features=function(m){if(!arguments.length)return y;m&&d.tile(false);y=m;return d.reload()};d.clip=function(m){if(!arguments.length)return q;
q&&l.removeChild(s);if(q=m)l.insertBefore(s,l.firstChild);var o=d.cache.locks();for(var u in o)q?o[u].element.setAttribute("clip-path",i):o[u].element.removeAttribute("clip-path");return d};var E=d.tile;d.tile=function(m){arguments.length&&!m&&d.clip(m);return E.apply(d,arguments)};var A=d.map;d.map=function(m){if(m&&w){var o=m.tileSize();w.setAttribute("width",o.x);w.setAttribute("height",o.y)}return A.apply(d,arguments)};d.show=function(m){q?m.element.setAttribute("clip-path",i):m.element.removeAttribute("clip-path");
d.dispatch({type:"show",tile:m,features:m.features});return d};d.reshow=function(){var m=d.cache.locks();for(var o in m)d.show(m[o]);return d};return d};r.dblclick=function(){function e(c){var d=g.zoom();d=c.shiftKey?Math.ceil(d)-d-1:1-d+Math.floor(d);a==="mouse"?g.zoomBy(d,g.mouse(c)):g.zoomBy(d)}var f={},a="mouse",g,h;f.zoom=function(c){if(!arguments.length)return a;a=c;return f};f.map=function(c){if(!arguments.length)return g;if(g){h.removeEventListener("dblclick",e,false);h=null}if(g=c){h=g.container();
h.addEventListener("dblclick",e,false)}return f};return f};r.drag=function(){function e(d){if(!d.shiftKey){c={x:d.clientX,y:d.clientY};g.focusableParent().focus();d.preventDefault();document.body.style.setProperty("cursor","move",null)}}function f(d){if(c){g.panBy({x:d.clientX-c.x,y:d.clientY-c.y});c.x=d.clientX;c.y=d.clientY}}var a={},g,h,c;a.map=function(d){if(!arguments.length)return g;if(g){h.removeEventListener("mousedown",e,false);h=null}if(g=d){h=g.container();h.addEventListener("mousedown",
e,false)}return a};window.addEventListener("mousemove",f,false);window.addEventListener("mouseup",function(d){if(c){f(d);c=null;document.body.style.removeProperty("cursor")}},false);return a};r.wheel=function(){function e(){l=null}function f(k){var i=(k.wheelDelta/120||-k.detail)*0.1,s;if(ba<0){s=Date.now();var w=s-h;if(w>9&&Math.abs(k.wheelDelta)/w>=50)ba=1;h=s}if(ba==1)i*=0.03;if(!c&&i){s=Date.now();if(s-g>200){i=i>0?+1:-1;g=s}else i=0}if(i)switch(d){case "mouse":s=n.mouse(k);l||(l=n.pointLocation(s));
n.off("move",e).zoomBy(i,s,l).on("move",e);break;case "location":n.zoomBy(i,n.locationPoint(l),l);break;default:n.zoomBy(i);break}k.preventDefault();return false}var a={},g=0,h=0,c=true,d="mouse",l,n,q;a.smooth=function(k){if(!arguments.length)return c;c=k;return a};a.zoom=function(k,i){if(!arguments.length)return d;d=k;l=i;if(n)d=="mouse"?n.on("move",e):n.off("move",e);return a};a.map=function(k){if(!arguments.length)return n;if(n){q.removeEventListener("mousemove",e,false);q.removeEventListener("mousewheel",
f,false);q.removeEventListener("DOMMouseScroll",f,false);q=null;n.off("move",e)}if(n=k){d=="mouse"&&n.on("move",e);q=n.container();q.addEventListener("mousemove",e,false);q.addEventListener("mousewheel",f,false);q.addEventListener("DOMMouseScroll",f,false)}return a};return a};var ba=/WebKit\/533/.test(navigator.userAgent)?-1:0;r.arrow=function(){function e(w){if(!(w.ctrlKey||w.altKey||w.metaKey)){var y=Date.now(),C=0,E=0;switch(w.keyCode){case 37:if(!c.left){d=y;c.left=1;c.right||(C=k)}break;case 39:if(!c.right){d=
y;c.right=1;c.left||(C=-k)}break;case 38:if(!c.up){d=y;c.up=1;c.down||(E=k)}break;case 40:if(!c.down){d=y;c.down=1;c.up||(E=-k)}break;default:return}if(C||E)i.panBy({x:C,y:E});if(!l&&c.left|c.right|c.up|c.down)l=setInterval(g,q);w.preventDefault()}}function f(w){d=Date.now();switch(w.keyCode){case 37:c.left=0;break;case 39:c.right=0;break;case 38:c.up=0;break;case 40:c.down=0;break;default:return}if(l&&!(c.left|c.right|c.up|c.down))l=clearInterval(l);w.preventDefault()}function a(w){switch(w.charCode){case 45:case 95:i.zoom(Math.ceil(i.zoom())-
1);break;case 43:case 61:i.zoom(Math.floor(i.zoom())+1);break;default:return}w.preventDefault()}function g(){if(i)if(!(Date.now()<d+n)){var w=(c.left-c.right)*k,y=(c.up-c.down)*k;if(w||y)i.panBy({x:w,y:y})}}var h={},c={left:0,right:0,up:0,down:0},d=0,l,n=250,q=50,k=16,i,s;h.map=function(w){if(!arguments.length)return i;if(i){s.removeEventListener("keypress",a,false);s.removeEventListener("keydown",e,false);s.removeEventListener("keyup",f,false);s=null}if(i=w){s=i.focusableParent();s.addEventListener("keypress",
a,false);s.addEventListener("keydown",e,false);s.addEventListener("keyup",f,false)}return h};h.speed=function(w){if(!arguments.length)return k;k=w;return h};return h};r.hash=function(){function e(){var d=c.center(),l=c.zoom(),n=Math.max(0,Math.ceil(Math.log(l)/Math.LN2));d="#"+l.toFixed(2)+"/"+d.lat.toFixed(n)+"/"+d.lon.toFixed(n);if(g!==d)location.replace(g=d)}function f(){if(location.hash!==g){var d=(g=location.hash).substring(1).split("/").map(Number);if(d.length<3||d.some(isNaN))e();else{var l=
c.size();c.zoomBy(d[0]-c.zoom(),{x:l.x/2,y:l.y/2},{lat:Math.min(h,Math.max(-h,d[1])),lon:d[2]})}}}var a={},g,h=89.99999999,c;a.map=function(d){if(!arguments.length)return c;if(c){c.off("move",e);window.removeEventListener("hashchange",f,false)}if(c=d){c.on("move",e);window.addEventListener("hashchange",f,false);location.hash?f():e()}return a};return a};r.interact=function(){var e={},f=r.drag(),a=r.wheel(),g=r.dblclick(),h=r.arrow();e.map=function(c){f.map(c);a.map(c);g.map(c);h.map(c);return e};return e};
r.compass=function(){function e(v){A.setAttribute("class","compass active");O||(O=setInterval(f,t));T&&H.panBy(T);B=Date.now();return k(v)}function f(){T&&Date.now()>B+j&&H.panBy(T)}function a(v){if(v.shiftKey){I={x0:H.mouse(v)};H.focusableParent().focus();return k(v)}}function g(v){if(I){I.x1=H.mouse(v);L.setAttribute("x",Math.min(I.x0.x,I.x1.x));L.setAttribute("y",Math.min(I.x0.y,I.x1.y));L.setAttribute("width",Math.abs(I.x0.x-I.x1.x));L.setAttribute("height",Math.abs(I.x0.y-I.x1.y));L.removeAttribute("display")}}
function h(){A.setAttribute("class","compass");if(I){if(I.x1){H.extent([H.pointLocation({x:Math.min(I.x0.x,I.x1.x),y:Math.max(I.x0.y,I.x1.y)}),H.pointLocation({x:Math.max(I.x0.x,I.x1.x),y:Math.min(I.x0.y,I.x1.y)})]);L.setAttribute("display","none")}I=null}if(O){clearInterval(O);O=0}}function c(v){return function(){v?this.setAttribute("class","active"):this.removeAttribute("class");T=v}}function d(v){return function(D){A.setAttribute("class","compass active");var G=H.zoom();H.zoom(v<0?Math.ceil(G)-
1:Math.floor(G)+1);return k(D)}}function l(v){return function(D){H.zoom(v);return k(D)}}function n(){this.setAttribute("class","active")}function q(){this.removeAttribute("class")}function k(v){v.stopPropagation();v.preventDefault();return false}function i(v){var D=Math.SQRT1_2*o,G=o*0.7,J=o*0.2,K=r.svg("g"),M=K.appendChild(r.svg("path")),P=K.appendChild(r.svg("path"));M.setAttribute("class","direction");M.setAttribute("pointer-events","all");M.setAttribute("d","M0,0L"+D+","+D+"A"+o+","+o+" 0 0,1 "+
-D+","+D+"Z");P.setAttribute("class","chevron");P.setAttribute("d","M"+J+","+(G-J)+"L0,"+G+" "+-J+","+(G-J));P.setAttribute("pointer-events","none");K.addEventListener("mousedown",e,false);K.addEventListener("mouseover",c(v),false);K.addEventListener("mouseout",c(null),false);K.addEventListener("dblclick",k,false);return K}function s(v){var D=o*0.4,G=D/2,J=r.svg("g"),K=J.appendChild(r.svg("path")),M=J.appendChild(r.svg("path")),P=J.appendChild(r.svg("path")),W=J.appendChild(r.svg("path"));K.setAttribute("class",
"back");K.setAttribute("d","M"+-D+",0V"+-D+"A"+D+","+D+" 0 1,1 "+D+","+-D+"V0Z");M.setAttribute("class","direction");M.setAttribute("d",K.getAttribute("d"));P.setAttribute("class","chevron");P.setAttribute("d","M"+-G+","+-D+"H"+G+(v>0?"M0,"+(-D-G)+"V"+-G:""));W.setAttribute("class","fore");W.setAttribute("fill","none");W.setAttribute("d",K.getAttribute("d"));J.addEventListener("mousedown",d(v),false);J.addEventListener("mouseover",n,false);J.addEventListener("mouseout",q,false);J.addEventListener("dblclick",
k,false);return J}function w(v){var D=o*0.2,G=o*0.4,J=r.svg("g"),K=J.appendChild(r.svg("rect")),M=J.appendChild(r.svg("path"));K.setAttribute("pointer-events","all");K.setAttribute("fill","none");K.setAttribute("x",-G);K.setAttribute("y",-0.75*G);K.setAttribute("width",2*G);K.setAttribute("height",1.5*G);M.setAttribute("class","chevron");M.setAttribute("d","M"+-D+",0H"+D);J.addEventListener("mousedown",l(v),false);J.addEventListener("dblclick",k,false);return J}function y(){var v=o+6,D=v,G=H.size();
switch(z){case "top-left":break;case "top-right":v=G.x-v;break;case "bottom-left":D=G.y-D;break;case "bottom-right":v=G.x-v;D=G.y-D;break}v="translate("+v+","+D+")";N&&N.setAttribute("transform",v);x&&x.setAttribute("transform",v);for(var J in m)J==H.zoom()?m[J].setAttribute("class","active"):m[J].removeAttribute("class")}function C(){for(;A.lastChild;)A.removeChild(A.lastChild);A.appendChild(L);if(X!="none"){N=A.appendChild(r.svg("g"));N.setAttribute("class","pan");var v=N.appendChild(r.svg("circle"));
v.setAttribute("class","back");v.setAttribute("r",o);N.appendChild(i({x:0,y:-u})).setAttribute("transform","rotate(0)");N.appendChild(i({x:u,y:0})).setAttribute("transform","rotate(90)");N.appendChild(i({x:0,y:u})).setAttribute("transform","rotate(180)");N.appendChild(i({x:-u,y:0})).setAttribute("transform","rotate(270)");v=N.appendChild(r.svg("circle"));v.setAttribute("fill","none");v.setAttribute("class","fore");v.setAttribute("r",o)}else N=null;if(F!="none"){x=A.appendChild(r.svg("g"));x.setAttribute("class",
"zoom");v=-0.5;if(F=="big"){m={};var D=H.zoomRange()[0];for(v=0;D<=H.zoomRange()[1];D++,v++)(m[D]=x.appendChild(w(D))).setAttribute("transform","translate(0,"+-(v+0.75)*o*0.4+")")}D=X=="none"?0.4:2;x.setAttribute("transform","translate(0,"+o*(/^top-/.test(z)?D+(v+0.5)*0.4:-D)+")");x.appendChild(s(+1)).setAttribute("transform","translate(0,"+-(v+0.5)*o*0.4+")");x.appendChild(s(-1)).setAttribute("transform","scale(-1)")}else x=null;y()}var E={},A=r.svg("g"),m={},o=30,u=16,B=0,j=250,t=50,z="top-left",
F="small",x,X="small",O,T,N,I,L=r.svg("rect"),H,R,S;A.setAttribute("class","compass");L.setAttribute("class","back fore");L.setAttribute("pointer-events","none");L.setAttribute("display","none");E.radius=function(v){if(!arguments.length)return o;o=v;H&&C();return E};E.speed=function(v){if(!arguments.length)return o;u=v;return E};E.position=function(v){if(!arguments.length)return z;z=v;H&&C();return E};E.pan=function(v){if(!arguments.length)return X;X=v;H&&C();return E};E.zoom=function(v){if(!arguments.length)return F;
F=v;H&&C();return E};E.map=function(v){if(!arguments.length)return H;if(H){R.removeEventListener("mousedown",a,false);R.removeChild(A);R=null;S.removeEventListener("mousemove",g,false);S.removeEventListener("mouseup",h,false);S=null;H.off("move",y).off("resize",y)}if(H=v){R=H.container();R.appendChild(A);R.addEventListener("mousedown",a,false);S=R.ownerDocument.defaultView;S.addEventListener("mousemove",g,false);S.addEventListener("mouseup",h,false);H.on("move",y).on("resize",y);C()}return E};return E};
r.grid=function(){function e(){var h=g.firstChild,c=a.size(),d=a.pointLocation(Y);a.pointLocation(c);var l=Math.pow(2,4-Math.round(a.zoom()));d.lat=Math.floor(d.lat/l)*l;d.lon=Math.ceil(d.lon/l)*l;for(var n;(n=a.locationPoint(d).x)<=c.x;d.lon+=l){h||(h=g.appendChild(r.svg("line")));h.setAttribute("x1",n);h.setAttribute("x2",n);h.setAttribute("y1",0);h.setAttribute("y2",c.y);h=h.nextSibling}for(;(n=a.locationPoint(d).y)<=c.y;d.lat-=l){h||(h=g.appendChild(r.svg("line")));h.setAttribute("y1",n);h.setAttribute("y2",
n);h.setAttribute("x1",0);h.setAttribute("x2",c.x);h=h.nextSibling}for(;h;){c=h.nextSibling;g.removeChild(h);h=c}}var f={},a,g=r.svg("g");g.setAttribute("class","grid");f.map=function(h){if(!arguments.length)return a;if(a){g.parentNode.removeChild(g);a.off("move",e).off("resize",e)}if(a=h){a.on("move",e).on("resize",e);a.container().appendChild(g);a.dispatch({type:"move"})}return f};return f};r.stylist=function(){function e(h){var c=h.features.length,d=f.length,l=a.length,n,q,k,i,s,w;for(s=0;s<c;++s)if(q=
(n=h.features[s]).element){n=n.data;for(w=0;w<d;++w){i=(k=f[w]).value;if(typeof i==="function")i=i.call(null,n);i==null?k.name.local?q.removeAttributeNS(k.name.space,k.name.local):q.removeAttribute(k.name):k.name.local?q.setAttributeNS(k.name.space,k.name.local,i):q.setAttribute(k.name,i)}for(w=0;w<l;++w){i=(k=a[w]).value;if(typeof i==="function")i=i.call(null,n);i==null?q.style.removeProperty(k.name):q.style.setProperty(k.name,i,k.priority)}if(i=g){if(typeof i==="function")i=i.call(null,n);for(;q.lastChild;)q.removeChild(q.lastChild);
i!=null&&q.appendChild(r.svg("title")).appendChild(document.createTextNode(i))}}}var f=[],a=[],g;e.attr=function(h,c){f.push({name:fa(h),value:c});return e};e.style=function(h,c,d){a.push({name:h,value:c,priority:arguments.length<3?null:d});return e};e.title=function(h){g=h;return e};return e}})(org.polymaps);
